'use client';

import React, { useState, useEffect } from 'react';
import { useMediaPermissions, –°—Ç–∞—Ç—É—Å–†–∞–∑—Ä–µ—à–µ–Ω–∏–π } from '@/hooks/useMediaPermissions';

interface MediaPermissionModalProps {
  –æ—Ç–∫—Ä—ã—Ç: boolean;
  –Ω–∞_–∑–∞–∫—Ä—ã—Ç—å: () => void;
  –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–ø–æ–ª—É—á–µ–Ω–æ: () => void;
  –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ: () => void;
  —Ç—Ä–µ–±—É–µ—Ç—Å—è_–º–∏–∫—Ä–æ—Ñ–æ–Ω?: boolean;
  —Ç—Ä–µ–±—É–µ—Ç—Å—è_–∫–∞–º–µ—Ä–∞?: boolean;
  –∑–∞–≥–æ–ª–æ–≤–æ–∫?: string;
  –æ–ø–∏—Å–∞–Ω–∏–µ?: string;
}

export const MediaPermissionModal: React.FC<MediaPermissionModalProps> = ({
  –æ—Ç–∫—Ä—ã—Ç,
  –Ω–∞_–∑–∞–∫—Ä—ã—Ç—å,
  –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–ø–æ–ª—É—á–µ–Ω–æ,
  –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ,
  —Ç—Ä–µ–±—É–µ—Ç—Å—è_–º–∏–∫—Ä–æ—Ñ–æ–Ω = true,
  —Ç—Ä–µ–±—É–µ—Ç—Å—è_–∫–∞–º–µ—Ä–∞ = false,
  –∑–∞–≥–æ–ª–æ–≤–æ–∫ = '–î–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É',
  –æ–ø–∏—Å–∞–Ω–∏–µ = '–î–ª—è —É—á–∞—Å—Ç–∏—è –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º –æ–±—â–µ–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É'
}) => {
  const {
    —Å—Ç–∞—Ç—É—Å_–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞,
    —Å—Ç–∞—Ç—É—Å_–∫–∞–º–µ—Ä—ã,
    –∑–∞–ø—Ä–æ—Å–∏—Ç—å_–º–∏–∫—Ä–æ—Ñ–æ–Ω,
    –∑–∞–ø—Ä–æ—Å–∏—Ç—å_–∫–∞–º–µ—Ä—É,
    –∑–∞–ø—Ä–æ—Å–∏—Ç—å_–≤—Å–µ,
    –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
  } = useMediaPermissions();

  const [–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, set–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è] = useState(false);
  const [–æ—à–∏–±–∫–∞, set–û—à–∏–±–∫–∞] = useState<string | null>(null);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
  useEffect(() => {
    if (!–æ—Ç–∫—Ä—ã—Ç) return;

    const –º–∏–∫—Ä–æ—Ñ–æ–Ω_–æ–∫ = !—Ç—Ä–µ–±—É–µ—Ç—Å—è_–º–∏–∫—Ä–æ—Ñ–æ–Ω || —Å—Ç–∞—Ç—É—Å_–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ === '—Ä–∞–∑—Ä–µ—à–µ–Ω–æ';
    const –∫–∞–º–µ—Ä–∞_–æ–∫ = !—Ç—Ä–µ–±—É–µ—Ç—Å—è_–∫–∞–º–µ—Ä–∞ || —Å—Ç–∞—Ç—É—Å_–∫–∞–º–µ—Ä—ã === '—Ä–∞–∑—Ä–µ—à–µ–Ω–æ';

    if (–º–∏–∫—Ä–æ—Ñ–æ–Ω_–æ–∫ && –∫–∞–º–µ—Ä–∞_–æ–∫) {
      –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–ø–æ–ª—É—á–µ–Ω–æ();
    }
  }, [–æ—Ç–∫—Ä—ã—Ç, —Å—Ç–∞—Ç—É—Å_–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, —Å—Ç–∞—Ç—É—Å_–∫–∞–º–µ—Ä—ã, —Ç—Ä–µ–±—É–µ—Ç—Å—è_–º–∏–∫—Ä–æ—Ñ–æ–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è_–∫–∞–º–µ—Ä–∞, –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–ø–æ–ª—É—á–µ–Ω–æ]);

  const –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_–∑–∞–ø—Ä–æ—Å = async () => {
    if (–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è) return;

    try {
      set–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è(true);
      set–û—à–∏–±–∫–∞(null);

      let —É—Å–ø–µ—Ö = true;

      if (—Ç—Ä–µ–±—É–µ—Ç—Å—è_–º–∏–∫—Ä–æ—Ñ–æ–Ω && —Å—Ç–∞—Ç—É—Å_–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ !== '—Ä–∞–∑—Ä–µ—à–µ–Ω–æ') {
        const —Ä–µ–∑—É–ª—å—Ç–∞—Ç = await –∑–∞–ø—Ä–æ—Å–∏—Ç—å_–º–∏–∫—Ä–æ—Ñ–æ–Ω();
        if (!—Ä–µ–∑—É–ª—å—Ç–∞—Ç) —É—Å–ø–µ—Ö = false;
      }

      if (—Ç—Ä–µ–±—É–µ—Ç—Å—è_–∫–∞–º–µ—Ä–∞ && —Å—Ç–∞—Ç—É—Å_–∫–∞–º–µ—Ä—ã !== '—Ä–∞–∑—Ä–µ—à–µ–Ω–æ') {
        const —Ä–µ–∑—É–ª—å—Ç–∞—Ç = await –∑–∞–ø—Ä–æ—Å–∏—Ç—å_–∫–∞–º–µ—Ä—É();
        if (!—Ä–µ–∑—É–ª—å—Ç–∞—Ç) —É—Å–ø–µ—Ö = false;
      }

      if (—É—Å–ø–µ—Ö) {
        –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–ø–æ–ª—É—á–µ–Ω–æ();
      } else {
        –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ();
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π:', error);
      set–û—à–∏–±–∫–∞('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π');
      –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ();
    } finally {
      set–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è(false);
    }
  };

  const –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_–Ω–∞—Å—Ç—Ä–æ–π–∫–∏_–±—Ä–∞—É–∑–µ—Ä–∞ = () => {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ
    const –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è = `
–î–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É:

1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É –∑–∞–º–∫–∞ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ "–†–∞–∑—Ä–µ—à–∏—Ç—å" –¥–ª—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

–ò–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞:
‚Ä¢ Chrome: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ ‚Üí –ú–∏–∫—Ä–æ—Ñ–æ–Ω
‚Ä¢ Firefox: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å ‚Üí –†–∞–∑—Ä–µ—à–µ–Ω–∏—è ‚Üí –ú–∏–∫—Ä–æ—Ñ–æ–Ω
‚Ä¢ Safari: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –í–µ–±-—Å–∞–π—Ç—ã ‚Üí –ú–∏–∫—Ä–æ—Ñ–æ–Ω
`;
    
    alert(–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è);
  };

  const –ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_—Å—Ç–∞—Ç—É—Å–∞ = (—Å—Ç–∞—Ç—É—Å: –°—Ç–∞—Ç—É—Å–†–∞–∑—Ä–µ—à–µ–Ω–∏–π): string => {
    switch (—Å—Ç–∞—Ç—É—Å) {
      case '—Ä–∞–∑—Ä–µ—à–µ–Ω–æ':
        return '–†–∞–∑—Ä–µ—à–µ–Ω–æ ‚úÖ';
      case '–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ':
        return '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ ‚ùå';
      case '–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è':
        return '–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è...';
      case '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ':
        return '–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
      default:
        return '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ';
    }
  };

  const –ø–æ–ª—É—á–∏—Ç—å_—Ü–≤–µ—Ç_—Å—Ç–∞—Ç—É—Å–∞ = (—Å—Ç–∞—Ç—É—Å: –°—Ç–∞—Ç—É—Å–†–∞–∑—Ä–µ—à–µ–Ω–∏–π): string => {
    switch (—Å—Ç–∞—Ç—É—Å) {
      case '—Ä–∞–∑—Ä–µ—à–µ–Ω–æ':
        return 'text-[var(--success)]';
      case '–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ':
        return 'text-[var(--danger)]';
      case '–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è':
        return 'text-[var(--warning)]';
      case '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ':
        return 'text-[var(--text-tertiary)]';
      default:
        return 'text-[var(--text-secondary)]';
    }
  };

  if (!–æ—Ç–∫—Ä—ã—Ç) return null;

  // –ï—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–µ–¥–∏–∞ API
  if (!–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è) {
    return (
      <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div className="bg-[var(--bg-primary)] rounded-lg shadow-lg max-w-md w-full p-6">
          <div className="text-center">
            <div className="w-16 h-16 mx-auto mb-4 bg-[var(--danger)] bg-opacity-10 rounded-full flex items-center justify-center">
              <svg className="w-8 h-8 text-[var(--danger)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h3 className="text-lg font-semibold text-[var(--text-primary)] mb-2">
              –ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
            </h3>
            <p className="text-[var(--text-secondary)] mb-6">
              –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ
            </p>
            <button
              onClick={–Ω–∞_–∑–∞–∫—Ä—ã—Ç—å}
              className="w-full px-4 py-2 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] text-[var(--text-primary)] rounded-lg transition-colors"
            >
              –ü–æ–Ω—è—Ç–Ω–æ
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div className="bg-[var(--bg-primary)] rounded-lg shadow-lg max-w-md w-full p-6">
        <div className="text-center mb-6">
          <div className="w-16 h-16 mx-auto mb-4 bg-[var(--accent)] bg-opacity-10 rounded-full flex items-center justify-center">
            <svg className="w-8 h-8 text-[var(--accent)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
            </svg>
          </div>
          <h3 className="text-lg font-semibold text-[var(--text-primary)] mb-2">
            {–∑–∞–≥–æ–ª–æ–≤–æ–∫}
          </h3>
          <p className="text-[var(--text-secondary)]">
            {–æ–ø–∏—Å–∞–Ω–∏–µ}
          </p>
        </div>

        {/* –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π */}
        <div className="space-y-3 mb-6">
          {—Ç—Ä–µ–±—É–µ—Ç—Å—è_–º–∏–∫—Ä–æ—Ñ–æ–Ω && (
            <div className="flex items-center justify-between p-3 bg-[var(--bg-secondary)] rounded-lg">
              <div className="flex items-center gap-3">
                <svg className="w-5 h-5 text-[var(--text-secondary)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                </svg>
                <span className="text-[var(--text-primary)]">–ú–∏–∫—Ä–æ—Ñ–æ–Ω</span>
              </div>
              <span className={–ø–æ–ª—É—á–∏—Ç—å_—Ü–≤–µ—Ç_—Å—Ç–∞—Ç—É—Å–∞(—Å—Ç–∞—Ç—É—Å_–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞)}>
                {–ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_—Å—Ç–∞—Ç—É—Å–∞(—Å—Ç–∞—Ç—É—Å_–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞)}
              </span>
            </div>
          )}

          {—Ç—Ä–µ–±—É–µ—Ç—Å—è_–∫–∞–º–µ—Ä–∞ && (
            <div className="flex items-center justify-between p-3 bg-[var(--bg-secondary)] rounded-lg">
              <div className="flex items-center gap-3">
                <svg className="w-5 h-5 text-[var(--text-secondary)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
                <span className="text-[var(--text-primary)]">–ö–∞–º–µ—Ä–∞</span>
              </div>
              <span className={–ø–æ–ª—É—á–∏—Ç—å_—Ü–≤–µ—Ç_—Å—Ç–∞—Ç—É—Å–∞(—Å—Ç–∞—Ç—É—Å_–∫–∞–º–µ—Ä—ã)}>
                {–ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_—Å—Ç–∞—Ç—É—Å–∞(—Å—Ç–∞—Ç—É—Å_–∫–∞–º–µ—Ä—ã)}
              </span>
            </div>
          )}
        </div>

        {/* –û—à–∏–±–∫–∞ */}
        {–æ—à–∏–±–∫–∞ && (
          <div className="mb-4 p-3 bg-[var(--danger)] bg-opacity-10 border border-[var(--danger)] rounded-lg">
            <p className="text-[var(--danger)] text-sm">{–æ—à–∏–±–∫–∞}</p>
          </div>
        )}

        {/* –ö–Ω–æ–ø–∫–∏ */}
        <div className="space-y-3">
          {/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–ø—Ä–æ—Å–∞, –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */}
          {((—Ç—Ä–µ–±—É–µ—Ç—Å—è_–º–∏–∫—Ä–æ—Ñ–æ–Ω && —Å—Ç–∞—Ç—É—Å_–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ !== '—Ä–∞–∑—Ä–µ—à–µ–Ω–æ') || 
            (—Ç—Ä–µ–±—É–µ—Ç—Å—è_–∫–∞–º–µ—Ä–∞ && —Å—Ç–∞—Ç—É—Å_–∫–∞–º–µ—Ä—ã !== '—Ä–∞–∑—Ä–µ—à–µ–Ω–æ')) && (
            <button
              onClick={–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_–∑–∞–ø—Ä–æ—Å}
              disabled={–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è || 
                       (—Ç—Ä–µ–±—É–µ—Ç—Å—è_–º–∏–∫—Ä–æ—Ñ–æ–Ω && —Å—Ç–∞—Ç—É—Å_–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ === '–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è') ||
                       (—Ç—Ä–µ–±—É–µ—Ç—Å—è_–∫–∞–º–µ—Ä–∞ && —Å—Ç–∞—Ç—É—Å_–∫–∞–º–µ—Ä—ã === '–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è')}
              className="w-full px-4 py-3 bg-[var(--accent)] hover:bg-opacity-90 disabled:opacity-50 text-white rounded-lg transition-colors font-medium"
            >
              {–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è ? '–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø...' : '–†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø'}
            </button>
          )}

          {/* –ö–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π */}
          {((—Ç—Ä–µ–±—É–µ—Ç—Å—è_–º–∏–∫—Ä–æ—Ñ–æ–Ω && —Å—Ç–∞—Ç—É—Å_–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ === '–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ') || 
            (—Ç—Ä–µ–±—É–µ—Ç—Å—è_–∫–∞–º–µ—Ä–∞ && —Å—Ç–∞—Ç—É—Å_–∫–∞–º–µ—Ä—ã === '–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ')) && (
            <button
              onClick={–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_–Ω–∞—Å—Ç—Ä–æ–π–∫–∏_–±—Ä–∞—É–∑–µ—Ä–∞}
              className="w-full px-4 py-3 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] text-[var(--text-primary)] rounded-lg transition-colors"
            >
              –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞
            </button>
          )}

          {/* –ö–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã */}
          <div className="flex gap-3">
            <button
              onClick={–Ω–∞_–∑–∞–∫—Ä—ã—Ç—å}
              className="flex-1 px-4 py-2 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] text-[var(--text-primary)] rounded-lg transition-colors"
            >
              –û—Ç–º–µ–Ω–∞
            </button>
            <button
              onClick={() => {
                –Ω–∞_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ_–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ();
                –Ω–∞_–∑–∞–∫—Ä—ã—Ç—å();
              }}
              className="flex-1 px-4 py-2 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] text-[var(--text-primary)] rounded-lg transition-colors"
            >
              –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
            </button>
          </div>
        </div>

        {/* –ü–æ–¥—Å–∫–∞–∑–∫–∞ */}
        <div className="mt-4 p-3 bg-[var(--bg-secondary)] rounded-lg">
          <p className="text-xs text-[var(--text-tertiary)]">
            üí° –†–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è —ç—Ç–æ–≥–æ —Å–∞–π—Ç–∞. –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∏—Ö –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É üîí –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ.
          </p>
        </div>
      </div>
    </div>
  );
};